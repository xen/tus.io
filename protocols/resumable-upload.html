<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    
    

    <title>Resumable upload protocol | tus</title>

    <link rel="shortcut icon" href="/assets/img/favicon.png">
    <link rel="apple-touch-icon" href="/assets/img/favicon.png">
    <link rel="stylesheet" href="/assets/build/app.19232c7fbe3bb62a1a03.css"  media="screen" charset="utf-8">
    <link type="application/atom+xml" rel="alternate" href="https://tus.io/blog.atom" />

    <!-- Twitter follow button script -->
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  </head>

  <body>
    
    
    

    <div class="wrapper">
      <div class="TransloaditBar">
        <a class="TransloaditBar-logo" href="https://transloadit.com/" target="_blank" rel="noopener noreferrer">
          <img class="TransloaditBar-logoImg" src="/assets/img/transloadit.svg" width="82" height="19" alt="Transloadit">
        </a>
        <div class="TransloaditBar-about">tus is an open source project by <a class="TransloaditBar-link" href="https://transloadit.com/" target="_blank">Transloadit</a></div>
      </div>

      <div class="header">
        <a href="https://github.com/tus/tus-resumable-upload-protocol" class="github-corner" aria-label="View source on GitHub"><svg width="64" height="64" viewBox="0 0 250 250" style="fill:#48aa92; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

        <div class="container">
          <div class="row">
            <div class="three columns logo-container">
              <h3 class="logo">
                <a href="/">
                  
                    <img src="/assets/img/favicon.png" class="shield" alt="tus" />
                  

                  <img src="/assets/img/tus8.png" alt="tus" />
                </a>
              </h3>
            </div>

            <div class="nine columns nav-container">
              <a href="#" class="toggler">
                <span class="hamburger">&#8801;</span>
                <span class="cross">&#10005;</span>
              </a>

              <ul class="nav">
                
                  
                  
                  
                  
                  <li class="">
                    <a data-pageUrlHtml="/protocols/resumable-upload.html.html" href="/faq.html">FAQ</a>
                  </li>
                
                  
                  
                  
                  
                  <li class="">
                    <a data-pageUrlHtml="/protocols/resumable-upload.html.html" href="/support.html">Support</a>
                  </li>
                
                  
                  
                  
                  
                  <li class="">
                    <a data-pageUrlHtml="/protocols/resumable-upload.html.html" href="/blog.html">Blog</a>
                  </li>
                
                  
                  
                  
                  
                  <li class="">
                    <a data-pageUrlHtml="/protocols/resumable-upload.html.html" href="/demo.html">Demo</a>
                  </li>
                
                  
                  
                  
                  
                  <li class="active">
                    <a data-pageUrlHtml="/protocols/resumable-upload.html.html" href="/protocols/resumable-upload.html">Protocol</a>
                  </li>
                
                  
                  
                  
                  
                  <li class="">
                    <a data-pageUrlHtml="/protocols/resumable-upload.html.html" href="/implementations.html">Implementations</a>
                  </li>
                
              </ul>

              <div class="u-cf"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="content">
        
          <div class="container">
        

          <div class="protocol">
<h1>Protocol</h1>

<p>This document contains the specification for the tus protocol which lays out exactly how tus clients and servers must behave. If you a less formal and more intuitive introduction, we recommend you to also have a look at our <a href="/faq.html">FAQ</a>.</p>

<div class="kramdown-toc">
<ul id="markdown-toc">
  <li><a href="#status" id="markdown-toc-status">Status</a></li>
  <li><a href="#contributing" id="markdown-toc-contributing">Contributing</a></li>
  <li><a href="#abstract" id="markdown-toc-abstract">Abstract</a></li>
  <li><a href="#notation" id="markdown-toc-notation">Notation</a></li>
  <li><a href="#core-protocol" id="markdown-toc-core-protocol">Core Protocol</a>    <ul>
      <li><a href="#example" id="markdown-toc-example">Example</a></li>
      <li><a href="#headers" id="markdown-toc-headers">Headers</a>        <ul>
          <li><a href="#upload-offset" id="markdown-toc-upload-offset">Upload-Offset</a></li>
          <li><a href="#upload-length" id="markdown-toc-upload-length">Upload-Length</a></li>
          <li><a href="#tus-version" id="markdown-toc-tus-version">Tus-Version</a></li>
          <li><a href="#tus-resumable" id="markdown-toc-tus-resumable">Tus-Resumable</a></li>
          <li><a href="#tus-extension" id="markdown-toc-tus-extension">Tus-Extension</a></li>
          <li><a href="#tus-max-size" id="markdown-toc-tus-max-size">Tus-Max-Size</a></li>
          <li><a href="#x-http-method-override" id="markdown-toc-x-http-method-override">X-HTTP-Method-Override</a></li>
        </ul>
      </li>
      <li><a href="#requests" id="markdown-toc-requests">Requests</a>        <ul>
          <li><a href="#head" id="markdown-toc-head">HEAD</a></li>
          <li><a href="#patch" id="markdown-toc-patch">PATCH</a></li>
          <li><a href="#options" id="markdown-toc-options">OPTIONS</a>            <ul>
              <li><a href="#example-1" id="markdown-toc-example-1">Example</a></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#protocol-extensions" id="markdown-toc-protocol-extensions">Protocol Extensions</a>    <ul>
      <li><a href="#creation" id="markdown-toc-creation">Creation</a>        <ul>
          <li><a href="#example-2" id="markdown-toc-example-2">Example</a></li>
          <li><a href="#headers-1" id="markdown-toc-headers-1">Headers</a>            <ul>
              <li><a href="#upload-defer-length" id="markdown-toc-upload-defer-length">Upload-Defer-Length</a></li>
              <li><a href="#upload-metadata" id="markdown-toc-upload-metadata">Upload-Metadata</a></li>
            </ul>
          </li>
          <li><a href="#requests-1" id="markdown-toc-requests-1">Requests</a>            <ul>
              <li><a href="#post" id="markdown-toc-post">POST</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#creation-with-upload" id="markdown-toc-creation-with-upload">Creation With Upload</a>        <ul>
          <li><a href="#example-3" id="markdown-toc-example-3">Example</a></li>
        </ul>
      </li>
      <li><a href="#expiration" id="markdown-toc-expiration">Expiration</a>        <ul>
          <li><a href="#example-4" id="markdown-toc-example-4">Example</a></li>
          <li><a href="#headers-2" id="markdown-toc-headers-2">Headers</a>            <ul>
              <li><a href="#upload-expires" id="markdown-toc-upload-expires">Upload-Expires</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#checksum" id="markdown-toc-checksum">Checksum</a>        <ul>
          <li><a href="#headers-3" id="markdown-toc-headers-3">Headers</a>            <ul>
              <li><a href="#tus-checksum-algorithm" id="markdown-toc-tus-checksum-algorithm">Tus-Checksum-Algorithm</a></li>
              <li><a href="#upload-checksum" id="markdown-toc-upload-checksum">Upload-Checksum</a></li>
            </ul>
          </li>
          <li><a href="#example-5" id="markdown-toc-example-5">Example</a></li>
        </ul>
      </li>
      <li><a href="#termination" id="markdown-toc-termination">Termination</a>        <ul>
          <li><a href="#requests-2" id="markdown-toc-requests-2">Requests</a>            <ul>
              <li><a href="#delete" id="markdown-toc-delete">DELETE</a></li>
            </ul>
          </li>
          <li><a href="#example-6" id="markdown-toc-example-6">Example</a></li>
        </ul>
      </li>
      <li><a href="#concatenation" id="markdown-toc-concatenation">Concatenation</a>        <ul>
          <li><a href="#headers-4" id="markdown-toc-headers-4">Headers</a>            <ul>
              <li><a href="#upload-concat" id="markdown-toc-upload-concat">Upload-Concat</a></li>
            </ul>
          </li>
          <li><a href="#example-7" id="markdown-toc-example-7">Example</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#faq" id="markdown-toc-faq">FAQ</a></li>
  <li><a href="#license" id="markdown-toc-license">License</a></li>
</ul>

</div>

<!-- Use `make inject-protocol` to fetch latest protocol version -->

<p><strong>Version:</strong> 1.0.0 (<a href="http://semver.org">SemVer</a>)<br />
<strong>Date:</strong> 2016-03-25<br />
<strong>Authors:</strong> <a href="https://twitter.com/felixge">Felix Geisendörfer</a>, <a href="https://twitter.com/kvz">Kevin van
Zonneveld</a>, <a href="https://twitter.com/tim_kos">Tim Koschützki</a>,
<a href="https://github.com/vayam">Naren Venkataraman</a>, <a href="https://twitter.com/Acconut_">Marius
Kleidl</a><br />
<strong>Collaborators</strong>:
<a href="https://github.com/biasedbit">Bruno de Carvalho</a>,
<a href="https://github.com/sandfox">James Butler</a>,
<a href="https://github.com/cybic">Øystein Steimler</a>,
<a href="https://github.com/srijs">Sam Rijs</a>,
<a href="https://github.com/khangtoh">Khang Toh</a>,
<a href="https://github.com/Amodio">Jacques Boscq</a>,
<a href="https://github.com/jerefrer">Jérémy FRERE</a>,
<a href="https://github.com/hintjens">Pieter Hintjens</a>,
<a href="https://github.com/ehd">Stephan Seidt</a>,
<a href="https://github.com/aranw">Aran Wilkinson</a>,
<a href="https://github.com/Baughn">Svein Ove Aas</a>,
<a href="https://github.com/noptic">Oliver Anan</a>,
<a href="https://github.com/schmerg">Tim</a>,
<a href="https://github.com/j4james">j4james</a>,
<a href="https://github.com/reschke">Julian Reschke</a>,
<a href="https://github.com/evert">Evert Pot</a>,
<a href="https://github.com/homeworkprod">Jochen Kupperschmidt</a>,
<a href="https://github.com/andrewfenn">Andrew Fenn</a>,
<a href="https://github.com/kevinswiber">Kevin Swiber</a>,
<a href="https://github.com/0x20h">Jan Kohlhof</a>,
<a href="https://github.com/radiospiel">eno</a>,
<a href="https://github.com/luk-">Luke Arduini</a>,
<a href="https://github.com/sheeep">Jim Schmid</a>,
<a href="https://github.com/jf">Jeffrey ‘jf’ Lim</a>,
<a href="https://github.com/timemachine3030">Daniel Lopretto</a>,
<a href="https://github.com/MarkMurphy">Mark Murphy</a>,
<a href="https://github.com/pmdarrow">Peter Darrow</a>,
<a href="https://github.com/Gargaj">Gargaj</a>,
<a href="https://github.com/qsorix">Tomasz Rydzyński</a>,
<a href="https://github.com/tino">Tino de Bruijn</a>,
<a href="https://github.com/kless">Jonas mg</a>,
<a href="https://github.com/ChristianUlbrich">Christian Ulbrich</a>,
<a href="https://github.com/jonhoo">Jon Gjengset</a>,
<a href="https://github.com/wronglink">Michael Elovskikh</a>,
<a href="https://github.com/technoweenie">Rick Olson</a>,
<a href="https://convolv.es">J. Ryan Stinnett</a>,
<a href="https://github.com/ifedapoolarewaju">Ifedapo Olarewaju</a>
<a href="https://github.com/ronag">Robert Nagy</a></p>

<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
“SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be
interpreted as described in <a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>.</p>

<h2 id="status">Status</h2>

<p>Following <a href="http://semver.org">SemVer</a>, as of 1.0.0 tus is ready for general
adoption. We don’t expect to make breaking changes, but if we do, those will
have to be in a 2.0.0. Introducing a new extension or any backwards-compatible
change adding new functionality will result in a bumped MINOR version.</p>

<h2 id="contributing">Contributing</h2>

<p>This protocol is authored and owned by the tus community. We welcome patches
and feedback via
<a href="https://github.com/tus/tus-resumable-upload-protocol">GitHub</a>. All authors and
collaborators will be listed as such in the protocol header.</p>

<p>Please also <a href="https://github.com/tus/tus.io/issues/new">let us know</a> about any
implementations (open source or commercial) if you’d like to be listed on the
<a href="https://www.tus.io/implementations.html">implementations</a> page.</p>

<h2 id="abstract">Abstract</h2>

<p>The protocol provides a mechanism for resumable file uploads via HTTP/1.1 (<a href="https://tools.ietf.org/html/rfc7230">RFC
7230</a>) and HTTP/2 (<a href="https://tools.ietf.org/html/rfc7540">RFC
7540</a>).</p>

<h2 id="notation">Notation</h2>

<p>Characters enclosed by square brackets indicate a placeholder (e.g. <code class="highlighter-rouge">[size]</code>).</p>

<p>The terms space, comma, and semicolon refer to their ASCII representations.</p>

<h2 id="core-protocol">Core Protocol</h2>

<p>The core protocol describes how to resume an interrupted upload. It assumes that
you already have a URL for the upload, usually created via the
<a href="#creation">Creation</a> extension.</p>

<p>All Clients and Servers MUST implement the core protocol.</p>

<p>This specification does not describe the structure of URLs, as that is left for
the specific implementation to decide.  All URLs shown in this document are
meant for example purposes only.</p>

<p>In addition, the implementation of authentication and authorization is left for
the Server to decide.</p>

<h3 id="example">Example</h3>

<p>A <code class="highlighter-rouge">HEAD</code> request is used to determine the offset at which the upload should be
continued.</p>

<p>The example below shows the continuation of a 100 byte upload that was
interrupted after 70 bytes were transferred.</p>

<p><strong>Request:</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HEAD /files/24e533e02ec3bc40c387f1a0e460e216 HTTP/1.1
Host: tus.example.org
Tus-Resumable: 1.0.0
</code></pre></div></div>

<p><strong>Response:</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 200 OK
Upload-Offset: 70
Tus-Resumable: 1.0.0
</code></pre></div></div>

<p>Given the offset, the Client uses the <code class="highlighter-rouge">PATCH</code> method to resume the upload:</p>

<p><strong>Request:</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PATCH /files/24e533e02ec3bc40c387f1a0e460e216 HTTP/1.1
Host: tus.example.org
Content-Type: application/offset+octet-stream
Content-Length: 30
Upload-Offset: 70
Tus-Resumable: 1.0.0

[remaining 30 bytes]
</code></pre></div></div>

<p><strong>Response:</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 204 No Content
Tus-Resumable: 1.0.0
Upload-Offset: 100
</code></pre></div></div>

<h3 id="headers">Headers</h3>

<h4 id="upload-offset">Upload-Offset</h4>

<p>The <code class="highlighter-rouge">Upload-Offset</code> request and response header indicates a byte offset within a
resource. The value MUST be a non-negative integer.</p>

<h4 id="upload-length">Upload-Length</h4>

<p>The <code class="highlighter-rouge">Upload-Length</code> request and response header indicates the size of the entire
upload in bytes. The value MUST be a non-negative integer.</p>

<h4 id="tus-version">Tus-Version</h4>

<p>The <code class="highlighter-rouge">Tus-Version</code> response header MUST be a comma-separated list of protocol versions
supported by the Server. The list MUST be sorted by Server’s preference
where the first one is the most preferred one.</p>

<h4 id="tus-resumable">Tus-Resumable</h4>

<p>The <code class="highlighter-rouge">Tus-Resumable</code> header MUST be included in every request and response except
for <code class="highlighter-rouge">OPTIONS</code> requests. The value MUST be the version of the protocol used by
the Client or the Server.</p>

<p>If the version specified by the Client is not supported by the Server, it
MUST respond with the <code class="highlighter-rouge">412 Precondition Failed</code> status and MUST include the
<code class="highlighter-rouge">Tus-Version</code> header into the response.
In addition, the Server MUST NOT process the request.</p>

<h4 id="tus-extension">Tus-Extension</h4>

<p>The <code class="highlighter-rouge">Tus-Extension</code> response header MUST be a comma-separated list of the extensions
supported by the Server. If no extensions are supported, the <code class="highlighter-rouge">Tus-Extension</code>
header MUST be omitted.</p>

<h4 id="tus-max-size">Tus-Max-Size</h4>

<p>The <code class="highlighter-rouge">Tus-Max-Size</code> response header MUST be a non-negative integer indicating the maximum
allowed size of an entire upload in bytes. The Server SHOULD set this header if
there is a known hard limit.</p>

<h4 id="x-http-method-override">X-HTTP-Method-Override</h4>

<p>The <code class="highlighter-rouge">X-HTTP-Method-Override</code> request header MUST be a string which MUST be
interpreted as the request’s method by the Server, if the header is presented.
The actual method of the request MUST be ignored. The Client SHOULD use this
header if its environment does not support the PATCH or DELETE methods.</p>

<h3 id="requests">Requests</h3>

<h4 id="head">HEAD</h4>

<p>The Server MUST always include the <code class="highlighter-rouge">Upload-Offset</code> header in the response for a
<code class="highlighter-rouge">HEAD</code> request, even if the offset is <code class="highlighter-rouge">0</code>, or the upload is already considered
completed. If the size of the upload is known, the Server MUST include the
<code class="highlighter-rouge">Upload-Length</code> header in the response. If the resource is not found, the Server
SHOULD return either the <code class="highlighter-rouge">404 Not Found</code>, <code class="highlighter-rouge">410 Gone</code> or <code class="highlighter-rouge">403 Forbidden</code> status
without the <code class="highlighter-rouge">Upload-Offset</code> header.</p>

<p>The Server MUST prevent the client and/or proxies from caching the response by
adding the <code class="highlighter-rouge">Cache-Control: no-store</code> header to the response.</p>

<h4 id="patch">PATCH</h4>

<p>The Server SHOULD accept <code class="highlighter-rouge">PATCH</code> requests against any upload URL and apply the
bytes contained in the message at the given offset specified by the
<code class="highlighter-rouge">Upload-Offset</code> header. All <code class="highlighter-rouge">PATCH</code> requests MUST use
<code class="highlighter-rouge">Content-Type: application/offset+octet-stream</code>, otherwise the server SHOULD
return a <code class="highlighter-rouge">415 Unsupported Media Type</code> status.</p>

<p>The <code class="highlighter-rouge">Upload-Offset</code> header’s value MUST be equal to the current offset of the
resource. In order to achieve parallel upload the
<a href="#concatenation">Concatenation</a> extension MAY be used. If the offsets do not
match, the Server MUST respond with the <code class="highlighter-rouge">409 Conflict</code> status without modifying
the upload resource.</p>

<p>The Client SHOULD send all the remaining bytes of an upload in a single <code class="highlighter-rouge">PATCH</code>
request, but MAY also use multiple small requests successively for scenarios
where this is desirable. One example for these situations is when the
<a href="#checksum">Checksum</a> extension is used.</p>

<p>The Server MUST acknowledge successful <code class="highlighter-rouge">PATCH</code> requests with the
<code class="highlighter-rouge">204 No Content</code> status. It MUST include the <code class="highlighter-rouge">Upload-Offset</code> header containing
the new offset. The new offset MUST be the sum of the offset before the <code class="highlighter-rouge">PATCH</code>
request and the number of bytes received and processed or stored during the
current <code class="highlighter-rouge">PATCH</code> request.</p>

<p>If the server receives a <code class="highlighter-rouge">PATCH</code> request against a non-existent resource
it SHOULD return a <code class="highlighter-rouge">404 Not Found</code> status.</p>

<p>Both Client and Server, SHOULD attempt to detect and handle network errors
predictably. They MAY do so by checking for read/write socket errors, as well
as setting read/write timeouts. A timeout SHOULD be handled by closing the underlying connection.</p>

<p>The Server SHOULD always attempt to store as much of the received data as possible.</p>

<h4 id="options">OPTIONS</h4>

<p>An <code class="highlighter-rouge">OPTIONS</code> request MAY be used to gather information about the Server’s current
configuration. A successful response indicated by the <code class="highlighter-rouge">204 No Content</code> or <code class="highlighter-rouge">200 OK</code> status
MUST contain the <code class="highlighter-rouge">Tus-Version</code> header. It MAY include the <code class="highlighter-rouge">Tus-Extension</code> and
<code class="highlighter-rouge">Tus-Max-Size</code> headers.</p>

<p>The Client SHOULD NOT include the <code class="highlighter-rouge">Tus-Resumable</code> header in the request and the
Server MUST ignore the header.</p>

<h5 id="example-1">Example</h5>

<p>This example clarifies the response for an <code class="highlighter-rouge">OPTIONS</code> request. The version used
in both, request and response, is <code class="highlighter-rouge">1.0.0</code> while the Server is also capable of
handling <code class="highlighter-rouge">0.2.2</code> and <code class="highlighter-rouge">0.2.1</code>. Uploads with a total size of up to 1GB are
allowed and the extensions for <a href="#creation">Creation</a> and
<a href="#expiration">Expiration</a> are enabled.</p>

<p><strong>Request:</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>OPTIONS /files HTTP/1.1
Host: tus.example.org
</code></pre></div></div>

<p><strong>Response:</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 204 No Content
Tus-Resumable: 1.0.0
Tus-Version: 1.0.0,0.2.2,0.2.1
Tus-Max-Size: 1073741824
Tus-Extension: creation,expiration
</code></pre></div></div>

<h2 id="protocol-extensions">Protocol Extensions</h2>

<p>Clients and Servers are encouraged to implement as many of the extensions
as possible. Feature detection SHOULD be achieved by the Client sending an
<code class="highlighter-rouge">OPTIONS</code> request and the Server responding with the <code class="highlighter-rouge">Tus-Extension</code> header.</p>

<h3 id="creation">Creation</h3>

<p>The Client and the Server SHOULD implement the upload creation extension. If
the Server supports this extension, it MUST add <code class="highlighter-rouge">creation</code> to the <code class="highlighter-rouge">Tus-Extension</code>
header.</p>

<h4 id="example-2">Example</h4>

<p>An empty <code class="highlighter-rouge">POST</code> request is used to create a new upload resource. The
<code class="highlighter-rouge">Upload-Length</code> header indicates the size of the entire upload in bytes.</p>

<p><strong>Request:</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /files HTTP/1.1
Host: tus.example.org
Content-Length: 0
Upload-Length: 100
Tus-Resumable: 1.0.0
Upload-Metadata: filename d29ybGRfZG9taW5hdGlvbl9wbGFuLnBkZg==,is_confidential
</code></pre></div></div>

<p><strong>Response:</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 201 Created
Location: https://tus.example.org/files/24e533e02ec3bc40c387f1a0e460e216
Tus-Resumable: 1.0.0
</code></pre></div></div>

<p>The new resource has an implicit offset of <code class="highlighter-rouge">0</code> allowing the Client to use the
core protocol for performing the actual upload.</p>

<h4 id="headers-1">Headers</h4>

<h5 id="upload-defer-length">Upload-Defer-Length</h5>

<p>The <code class="highlighter-rouge">Upload-Defer-Length</code> request and response header indicates that the size of
the upload is not known currently and will be transferred later. Its value MUST
be <code class="highlighter-rouge">1</code>. If the length of an upload is not deferred, this header MUST be omitted.</p>

<h5 id="upload-metadata">Upload-Metadata</h5>

<p>The <code class="highlighter-rouge">Upload-Metadata</code> request and response header MUST consist of one or more comma-separated
key-value pairs. The key and value MUST be separated by a space. The key
MUST NOT contain spaces and commas and MUST NOT be empty. The key SHOULD be
ASCII encoded and the value MUST be Base64 encoded. All keys MUST be unique.
The value MAY be empty. In these cases, the space, which would normally separate
the key and the value, MAY be left out.</p>

<h4 id="requests-1">Requests</h4>

<h5 id="post">POST</h5>

<p>The Client MUST send a <code class="highlighter-rouge">POST</code> request against a known upload creation URL to
request a new upload resource. The request MUST include one of the following headers:</p>

<p>a) <code class="highlighter-rouge">Upload-Length</code> to indicate the size of an entire upload in bytes.</p>

<p>b) <code class="highlighter-rouge">Upload-Defer-Length: 1</code> if upload size is not known at the time. Once it is
known the Client MUST set the <code class="highlighter-rouge">Upload-Length</code> header in the next <code class="highlighter-rouge">PATCH</code> request.
Once set the length MUST NOT be changed. As long as the length of the upload is
not known, the Server MUST set <code class="highlighter-rouge">Upload-Defer-Length: 1</code> in all responses to
<code class="highlighter-rouge">HEAD</code> requests. If the <code class="highlighter-rouge">Upload-Defer-Length</code> header contains any other value
than <code class="highlighter-rouge">1</code> the server should return a <code class="highlighter-rouge">400 Bad Request</code> status.</p>

<p>If the Server supports deferring length, it MUST add <code class="highlighter-rouge">creation-defer-length</code> to
the <code class="highlighter-rouge">Tus-Extension</code> header.</p>

<p>The Client MAY supply the <code class="highlighter-rouge">Upload-Metadata</code> header to add additional metadata to the
upload creation request. The Server MAY decide to ignore or use this information to
further process the request or to reject it. If an upload contains additional
metadata, responses to <code class="highlighter-rouge">HEAD</code> requests MUST include the <code class="highlighter-rouge">Upload-Metadata</code> header
and its value as specified by the Client during the creation.</p>

<p>If the length of the upload exceeds the maximum, which MAY be specified using
the <code class="highlighter-rouge">Tus-Max-Size</code> header, the Server MUST respond with the
<code class="highlighter-rouge">413 Request Entity Too Large</code> status.</p>

<p>The Server MUST acknowledge a successful upload creation with the <code class="highlighter-rouge">201 Created</code>
status. The Server MUST set the <code class="highlighter-rouge">Location</code> header to the URL of the created
resource. This URL MAY be absolute or relative.</p>

<p>The Client MUST perform the actual upload using the core protocol.</p>

<h3 id="creation-with-upload">Creation With Upload</h3>

<p>The Client MAY include parts of the upload in the initial Creation request
using the Creation With Upload extension.</p>

<p>If the Server supports this extension, it MUST advertise this by including
<code class="highlighter-rouge">creation-with-upload</code> in the <code class="highlighter-rouge">Tus-Extension</code> header. Furthermore, this extension
depends directly on the Creation extension. Therefore, if the Server does not
offer the Creation extension, it MUST NOT offer the Creation With Upload
extension either.</p>

<p>The Client MAY include either the entirety or a chunk of the upload data in the body of
the <code class="highlighter-rouge">POST</code> request. In this case, similar rules as for the <code class="highlighter-rouge">PATCH</code> request and
response apply. The Client MUST include the
<code class="highlighter-rouge">Content-Type: application/offset+octet-stream</code> header. The Server SHOULD accept
as many bytes as possible and MUST include the <code class="highlighter-rouge">Upload-Offset</code> header in the
response and MUST set its value to the offset of the upload after applying the
accepted bytes.</p>

<p>If the Client wants to use this extension, the Client SHOULD verify that it is
supported by the Server before sending the <code class="highlighter-rouge">POST</code> request.
In addition, the Client SHOULD include the <code class="highlighter-rouge">Expect: 100-continue</code> header in
the request to receive early feedback from the Server on whether it will accept
the creation request, before attempting to transfer the first chunk.</p>

<h4 id="example-3">Example</h4>

<p>A non-empty <code class="highlighter-rouge">POST</code> request is used to create a new upload resource. The
<code class="highlighter-rouge">Upload-Offset</code> header in the response indicates how much data has been accepted.</p>

<p><strong>Request:</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /files HTTP/1.1
Host: tus.example.org
Content-Length: 5
Upload-Length: 100
Tus-Resumable: 1.0.0
Content-Type: application/offset+octet-stream

hello
</code></pre></div></div>

<p><strong>Response:</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 201 Created
Location: https://tus.example.org/files/24e533e02ec3bc40c387f1a0e460e216
Tus-Resumable: 1.0.0
Upload-Offset: 5
</code></pre></div></div>

<h3 id="expiration">Expiration</h3>

<p>The Server MAY remove unfinished uploads once they expire. In order to indicate
this behavior to the Client, the Server MUST add <code class="highlighter-rouge">expiration</code> to the
<code class="highlighter-rouge">Tus-Extension</code> header.</p>

<h4 id="example-4">Example</h4>

<p>The unfinished upload is available until the time specified in <code class="highlighter-rouge">Upload-Expires</code>.
After this date the upload can not be resumed.</p>

<p><strong>Request:</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PATCH /files/24e533e02ec3bc40c387f1a0e460e216 HTTP/1.1
Host: tus.example.org
Content-Type: application/offset+octet-stream
Content-Length: 30
Upload-Offset: 70
Tus-Resumable: 1.0.0

[remaining 30 bytes]
</code></pre></div></div>

<p><strong>Response:</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 204 No Content
Upload-Expires: Wed, 25 Jun 2014 16:00:00 GMT
Tus-Resumable: 1.0.0
Upload-Offset: 100
</code></pre></div></div>

<h4 id="headers-2">Headers</h4>

<h5 id="upload-expires">Upload-Expires</h5>

<p>The <code class="highlighter-rouge">Upload-Expires</code> response header indicates the time after which the unfinished upload
expires. A Server MAY wish to remove incomplete uploads after a given
period of time to prevent abandoned uploads from taking up extra storage. The
Client SHOULD use this header to determine if an upload is still valid before
attempting to resume the upload.</p>

<p>This header MUST be included in every <code class="highlighter-rouge">PATCH</code> response if the upload is going
to expire. If the expiration is known at the creation, the <code class="highlighter-rouge">Upload-Expires</code>
header MUST be included in the response to the initial <code class="highlighter-rouge">POST</code> request.
Its value MAY change over time.</p>

<p>If a Client does attempt to resume an upload which has since been removed by the
Server, the Server SHOULD respond with the<code class="highlighter-rouge">404 Not Found</code> or <code class="highlighter-rouge">410 Gone</code> status.
The latter one SHOULD be used if the Server is keeping track of expired uploads.
In both cases the Client SHOULD start a new upload.</p>

<p>The value of the <code class="highlighter-rouge">Upload-Expires</code> header MUST be in
<a href="https://tools.ietf.org/html/rfc7231#section-7.1.1.1">RFC 7231</a> datetime format.</p>

<h3 id="checksum">Checksum</h3>

<p>The Client and the Server MAY implement and use this extension to verify data
integrity of each <code class="highlighter-rouge">PATCH</code> request. If supported, the Server MUST add <code class="highlighter-rouge">checksum</code>
to the <code class="highlighter-rouge">Tus-Extension</code> header.</p>

<p>A Client MAY include the <code class="highlighter-rouge">Upload-Checksum</code> header in a <code class="highlighter-rouge">PATCH</code> request.
Once the entire request has been received, the Server MUST verify the uploaded
chunk against the provided checksum using the specified algorithm. Depending on
the result the Server MAY respond with one of the following status code:
1) <code class="highlighter-rouge">400 Bad Request</code> if the checksum algorithm is not supported by the server,
2) <code class="highlighter-rouge">460 Checksum Mismatch</code> if the checksums mismatch or
3) <code class="highlighter-rouge">204 No Content</code> if the checksums match and the processing of the data
succeeded.
In the first two cases the uploaded chunk MUST be discarded, and the upload and
its offset MUST NOT be updated.</p>

<p>The Server MUST support at least the SHA1 checksum algorithm identified
by <code class="highlighter-rouge">sha1</code>. The names of the checksum algorithms MUST only consist of ASCII
characters with the modification that uppercase characters are excluded.</p>

<p>The <code class="highlighter-rouge">Tus-Checksum-Algorithm</code> header MUST be included in the response to an
<code class="highlighter-rouge">OPTIONS</code> request.</p>

<p>If the hash cannot be calculated at the beginning of the upload, it MAY be
included as a trailer. If the Server can handle trailers, this behavior MUST be
announced by adding <code class="highlighter-rouge">checksum-trailer</code> to the <code class="highlighter-rouge">Tus-Extension</code> header.
Trailers, also known as trailing headers, are headers which are sent after the
request’s body has been transmitted already. Following
<a href="https://tools.ietf.org/html/rfc7230#section-4.1.2">RFC 7230</a> they
MUST be announced using the <code class="highlighter-rouge">Trailer</code> header and are only allowed in chunked
transfers.</p>

<h4 id="headers-3">Headers</h4>

<h5 id="tus-checksum-algorithm">Tus-Checksum-Algorithm</h5>

<p>The <code class="highlighter-rouge">Tus-Checksum-Algorithm</code> response header MUST be a comma-separated list of
the checksum algorithms supported by the server.</p>

<h5 id="upload-checksum">Upload-Checksum</h5>

<p>The <code class="highlighter-rouge">Upload-Checksum</code> request header contains information about the checksum of
the current body payload. The header MUST consist of the name of the used
checksum algorithm and the Base64 encoded checksum separated by a space.</p>

<h4 id="example-5">Example</h4>

<p><strong>Request</strong>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>OPTIONS /files HTTP/1.1
Host: tus.example.org
Tus-Resumable: 1.0.0
</code></pre></div></div>

<p><strong>Response</strong>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 204 No Content
Tus-Resumable: 1.0.0
Tus-Version: 1.0.0
Tus-Extension: checksum
Tus-Checksum-Algorithm: md5,sha1,crc32
</code></pre></div></div>

<p><strong>Request</strong>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PATCH /files/17f44dbe1c4bace0e18ab850cf2b3a83 HTTP/1.1
Content-Length: 11
Upload-Offset: 0
Tus-Resumable: 1.0.0
Upload-Checksum: sha1 Kq5sNclPz7QV2+lfQIuc6R7oRu0=

hello world
</code></pre></div></div>

<p><strong>Response</strong>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 204 No Content
Tus-Resumable: 1.0.0
Upload-Offset: 11
</code></pre></div></div>

<h3 id="termination">Termination</h3>

<p>This extension defines a way for the Client to terminate completed and unfinished
uploads allowing the Server to free up used resources.</p>

<p>If this extension is supported by the Server, it MUST be announced by adding
<code class="highlighter-rouge">termination</code> to the <code class="highlighter-rouge">Tus-Extension</code> header.</p>

<h4 id="requests-2">Requests</h4>

<h5 id="delete">DELETE</h5>

<p>When receiving a <code class="highlighter-rouge">DELETE</code> request for an existing upload the Server SHOULD free
associated resources and MUST respond with the <code class="highlighter-rouge">204 No Content</code> status
confirming that the upload was terminated. For all future requests to this URL,
the Server SHOULD respond with the <code class="highlighter-rouge">404 Not Found</code> or <code class="highlighter-rouge">410 Gone</code> status.</p>

<h4 id="example-6">Example</h4>

<p><strong>Request:</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DELETE /files/24e533e02ec3bc40c387f1a0e460e216 HTTP/1.1
Host: tus.example.org
Content-Length: 0
Tus-Resumable: 1.0.0
</code></pre></div></div>

<p><strong>Response:</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 204 No Content
Tus-Resumable: 1.0.0
</code></pre></div></div>

<h3 id="concatenation">Concatenation</h3>

<p>This extension can be used to concatenate multiple uploads into a single one enabling
Clients to perform parallel uploads and to upload non-contiguous chunks. If the
Server supports this extension, it MUST add <code class="highlighter-rouge">concatenation</code> to the
<code class="highlighter-rouge">Tus-Extension</code> header.</p>

<p>A partial upload represents a chunk of a file. It is constructed by including the
<code class="highlighter-rouge">Upload-Concat: partial</code> header while creating a new upload using the
<a href="#creation">Creation</a> extension. Multiple partial uploads are concatenated
into a final upload in the specified order. The Server SHOULD NOT process these
partial uploads until they are concatenated to form a final upload. The length of the
final upload MUST be the sum of the length of all partial uploads.</p>

<p>In order to create a new final upload, the Client MUST add the <code class="highlighter-rouge">Upload-Concat</code> header
to the upload creation request. The value MUST be <code class="highlighter-rouge">final</code> followed by a semicolon
and a space-separated list of the partial upload URLs that need to be concatenated.
The partial uploads MUST be concatenated as per the order specified in the list.
This concatenation request SHOULD happen after all of the corresponding partial uploads
are completed. The Client MUST NOT include the <code class="highlighter-rouge">Upload-Length</code> header in the final
upload creation.</p>

<p>The Client MAY send the concatenation request while the partial uploads are still
in progress. This feature MUST be explicitly announced by the Server by adding
<code class="highlighter-rouge">concatenation-unfinished</code> to the <code class="highlighter-rouge">Tus-Extension</code> header.</p>

<p>When creating a new final upload the partial uploads’ metadata SHALL NOT be
transferred to the new final upload. All metadata SHOULD be included in the
concatenation request using the <code class="highlighter-rouge">Upload-Metadata</code> header.</p>

<p>The Server MAY delete partial uploads after concatenation. They MAY however be
used multiple times to form a final resource.</p>

<p>The Server MUST respond with the <code class="highlighter-rouge">403 Forbidden</code> status to <code class="highlighter-rouge">PATCH</code> requests against
a final upload URL and MUST NOT modify the final or its partial uploads.</p>

<p>The response to a HEAD request for a final upload SHOULD NOT contain the <code class="highlighter-rouge">Upload-Offset</code>
header unless the concatenation has been successfully finished. After successful
concatenation, the <code class="highlighter-rouge">Upload-Offset</code> and <code class="highlighter-rouge">Upload-Length</code> MUST be set and their values MUST be
equal. The value of the <code class="highlighter-rouge">Upload-Offset</code> header before concatenation is not defined for a
final upload.</p>

<p>The response to a HEAD request for a partial upload MUST contain the <code class="highlighter-rouge">Upload-Offset</code> header.</p>

<p>The <code class="highlighter-rouge">Upload-Length</code> header MUST be included if the length of the final resource can
be calculated at the time of the request. Response to <code class="highlighter-rouge">HEAD</code> request against partial
or final upload MUST include the <code class="highlighter-rouge">Upload-Concat</code> header and its value as received in
the upload creation request.</p>

<h4 id="headers-4">Headers</h4>

<h5 id="upload-concat">Upload-Concat</h5>

<p>The <code class="highlighter-rouge">Upload-Concat</code> request and response header MUST be set in both partial and final upload creation
requests. It indicates whether the upload is either a partial
or final upload. If the upload is a partial one, the header value MUST be <code class="highlighter-rouge">partial</code>.
In the case of a final upload, its value MUST be <code class="highlighter-rouge">final</code> followed by a
semicolon and a space-separated list of partial upload URLs that will be
concatenated. The partial uploads URLs MAY be absolute or relative and MUST NOT contain
spaces as defined in <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a>.</p>

<h4 id="example-7">Example</h4>

<p>In the following example, the <code class="highlighter-rouge">Host</code> and <code class="highlighter-rouge">Tus-Resumable</code> headers are omitted for
readability although they are required by the specification.
In the beginning two partial uploads are created:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /files HTTP/1.1
Upload-Concat: partial
Upload-Length: 5

HTTP/1.1 201 Created
Location: https://tus.example.org/files/a
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /files HTTP/1.1
Upload-Concat: partial
Upload-Length: 6

HTTP/1.1 201 Created
Location: https://tus.example.org/files/b
</code></pre></div></div>

<p>You are now able to upload data to the two partial resources using <code class="highlighter-rouge">PATCH</code>
requests:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PATCH /files/a HTTP/1.1
Upload-Offset: 0
Content-Length: 5

hello

HTTP/1.1 204 No Content
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PATCH /files/b HTTP/1.1
Upload-Offset: 0
Content-Length: 6

 world

HTTP/1.1 204 No Content
</code></pre></div></div>

<p>In the first request, the string <code class="highlighter-rouge">hello</code> was uploaded while the second file now
contains ` world` with a leading space.</p>

<p>The next step is to create the final upload consisting of the two earlier
generated partial uploads. In the following request, no <code class="highlighter-rouge">Upload-Length</code> header is
presented.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /files HTTP/1.1
Upload-Concat: final;/files/a /files/b

HTTP/1.1 201 Created
Location: https://tus.example.org/files/ab
</code></pre></div></div>

<p>The length of the final resource is now 11 bytes consisting of the string
<code class="highlighter-rouge">hello world</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HEAD /files/ab HTTP/1.1

HTTP/1.1 200 OK
Upload-Length: 11
Upload-Concat: final;/files/a /files/b
</code></pre></div></div>

<h2 id="faq">FAQ</h2>

<p>The FAQ is available online at <a href="https://tus.io/faq.html">https://tus.io/faq.html</a>.</p>

<h2 id="license">License</h2>

<p>Licensed under the MIT license, see
<a href="https://github.com/tus/tus-resumable-upload-protocol/blob/master/LICENSE.txt">LICENSE.txt</a>.</p>

<p>Copyright (c) 2013-2016 Transloadit Ltd and Contributors.</p>


</div>


        
          </div>
        
      </div>

      
        <div class="container">
          <div id="disqus_thread"></div>

          <script type="text/javascript">
              /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
              var disqus_shortname = 'tusio'; // required: replace example with your forum shortname
              var disqus_url = 'https://tus.io/protocols/resumable-upload.html';

              /* * * DON'T EDIT BELOW THIS LINE * * */
              (function() {
                  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
          </script>

          <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

          <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
      
    </div>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-3306079-17']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

    <script type="text/javascript">
      window.tusdEndpoint = '';
    </script>

  </body>
  <script async src="/assets/build/app.19232c7fbe3bb62a1a03.js"></script>
</html>
